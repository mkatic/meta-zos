From ccdc3c7d315a70257cb09d288359b10e0fbeb2ae Mon Sep 17 00:00:00 2001
From: Marko Katic <dromede.gmail.com>
Date: Mon, 30 Jan 2012 18:56:15 +0100
Subject: [PATCH 11/15] remove in-kernel ts filtering, reduce clock for ads7846. I dont know
 why, but reducing clock seems to help.

---
 arch/arm/mach-pxa/spitz.c |    6 +-----
 1 files changed, 1 insertions(+), 5 deletions(-)

diff --git a/arch/arm/mach-pxa/spitz.c b/arch/arm/mach-pxa/spitz.c
index 9d11f53..7b6ea56 100644
--- a/arch/arm/mach-pxa/spitz.c
+++ b/arch/arm/mach-pxa/spitz.c
@@ -506,13 +506,9 @@ static void spitz_ads7846_wait_for_hsync(void)
 static struct ads7846_platform_data spitz_ads7846_info = {
 	.model			= 7846,
 	.vref_delay_usecs	= 100,
-	.settle_delay_usecs	= 100, /* FIXME */
 	.x_plate_ohms		= 419,
 	.y_plate_ohms		= 486,
 	.pressure_max		= 1024,
-	.debounce_max		= 6,
-	.debounce_tol		= 9,
-	.debounce_rep		= 1,
 	.gpio_pendown		= SPITZ_GPIO_TP_INT,
 	.wait_for_sync		= spitz_ads7846_wait_for_hsync,
 };
@@ -553,7 +549,7 @@ static struct pxa2xx_spi_chip spitz_max1111_chip = {
 static struct spi_board_info spitz_spi_devices[] = {
 	{
 		.modalias		= "ads7846",
-		.max_speed_hz		= 1200000,
+		.max_speed_hz		= 1000,
 		.bus_num		= 2,
 		.chip_select		= 0,
 		.platform_data		= &spitz_ads7846_info,
-- 
1.7.4.1

