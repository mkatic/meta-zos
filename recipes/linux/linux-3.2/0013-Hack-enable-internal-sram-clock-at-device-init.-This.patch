From da08b6e0a8a2c55543b51269a78ca2487f316a6a Mon Sep 17 00:00:00 2001
From: Marko Katic <dromede.gmail.com>
Date: Tue, 14 Feb 2012 20:55:49 +0100
Subject: [PATCH 13/15] Hack enable internal sram clock at device init. This is to
 make sure that the clock is enabled after rebooting.

---
 arch/arm/mach-pxa/spitz.c |    3 +++
 1 files changed, 3 insertions(+), 0 deletions(-)

diff --git a/arch/arm/mach-pxa/spitz.c b/arch/arm/mach-pxa/spitz.c
index a9f9a76..194f852 100644
--- a/arch/arm/mach-pxa/spitz.c
+++ b/arch/arm/mach-pxa/spitz.c
@@ -994,6 +994,9 @@ static void __init spitz_init(void)
 	spitz_nand_init();
 	spitz_i2c_init();
 	platform_device_register(&spitz_battery_device);
+
+	/* enable internal sram clock */
+	CKEN |= (1 << 20);
 }
 
 static void __init spitz_fixup(struct tag *tags, char **cmdline,
-- 
1.7.4.1

